<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="Dubers Blog" />



  <meta name="keywords" content="Machine Learning," />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="Kaggle Diabetic Retinopathy Detection
This is my experimental report for Kaggle Diabetic Retinopathy Detection Competition. Although the competition is closed, I hope to apply what I have learned thes">
<meta property="og:type" content="article">
<meta property="og:title" content="Kaggle Competition">
<meta property="og:url" content="http://yoursite.com/2015/12/17/Kaggle-Competition/index.html">
<meta property="og:site_name" content="Duburs Blog">
<meta property="og:description" content="Kaggle Diabetic Retinopathy Detection
This is my experimental report for Kaggle Diabetic Retinopathy Detection Competition. Although the competition is closed, I hope to apply what I have learned thes">
<meta property="og:image" content="http://yoursite.com/img/Kaggle/sample.jpeg">
<meta property="og:updated_time" content="2015-12-17T13:45:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kaggle Competition">
<meta name="twitter:description" content="Kaggle Diabetic Retinopathy Detection
This is my experimental report for Kaggle Diabetic Retinopathy Detection Competition. Although the competition is closed, I hope to apply what I have learned thes">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post'
  };
</script>

  <title> Kaggle Competition | Duburs Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zsaf">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?de04554947ef5ddb1d9dd95ef6598c19";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Duburs Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            <i class="menu-item-icon icon-next-categories"></i> <br />
            分類
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            <i class="menu-item-icon icon-next-about"></i> <br />
            關於
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            標籤
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              Kaggle Competition
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於
          <time itemprop="dateCreated" datetime="2015-12-17T13:57:50+08:00" content="2015-12-17">
            2015-12-17
          </time>
        </span>

        
          <span class="post-category" >
            &nbsp; | &nbsp; 分類於
            
              <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                <a href="/categories/Machine-Learning/" itemprop="url" rel="index">
                  <span itemprop="name">Machine Learning</span>
                </a>
              </span>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/12/17/Kaggle-Competition/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/17/Kaggle-Competition/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h2 id="kaggle-diabetic-retinopathy-detection">Kaggle Diabetic Retinopathy Detection</h2>
<p>This is my experimental report for Kaggle Diabetic Retinopathy Detection Competition. Although the competition is closed, I hope to apply what I have learned these months to a real problem and test how well I can perform on a competition.</p>
<h3 id="introduction">Introduction</h3>
<p>You are provided with a large set of high-resolution retina images taken under a variaty of imaging conditions.</p>
<p>A clinician has rated the presence of diabetic retinopathy in each image on a scale of 0 to 4, according to the following scale:</p>
<p>0 - No DR</p>
<p>1 - Mild</p>
<p>2 - Moderate</p>
<p>3 - Severe</p>
<p>4 - Proliferative DR</p>
<p>Your task is to create an automated analysis system capable of assigning a score based on this scale.</p>
<p>The sample image looks like this: <img src="/img/Kaggle/sample.jpeg" alt="sample"></p>
<p>My instinct lead me to try deep learning methods for this classification problem. Convolutional neural network is quite efficient for extracting features of images. I used caffe in this competition but I believe theano-based frameworks like Lasagne and Keras are more flexible during training and research and easy to master. In fact, most top solutions on the leader board used lasagne to implement their system.</p>
<h3 id="stage-1-explortary-data-analysis">Stage 1: Explortary Data Analysis</h3>
<p>The overall statistic information of training set is listed as follows:</p>
<table>
<thead>
<tr class="header">
<th align="center">Class</th>
<th align="center">Name</th>
<th align="center">Number of images</th>
<th align="center">Percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">Normal</td>
<td align="center">25810</td>
<td align="center">73.48%</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">Mild NPDR</td>
<td align="center">2443</td>
<td align="center">6.96%</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">Moderate NPDR</td>
<td align="center">5292</td>
<td align="center">15.07%</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">Severe NPDR</td>
<td align="center">873</td>
<td align="center">2.48%</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">PDR</td>
<td align="center">708</td>
<td align="center">2.01%</td>
</tr>
</tbody>
</table>
<p>The images in the dataset is in different size and these images come from different models and types of cameras, which can affect the visual appearance of left vs. right. From the sample image we can also find that there are black borders around the origin image, so we need to preproecss these images.</p>
<p>The testset contains 53576 images, so the size of testset is much bigger than training set, so it is obvious that we have to do data augmentation.</p>
<p>I used 90%/10% split of training set to test my network during training. ### Stage 2: Data Preprocess and Augmentation For multi-scale training, The inputs were resized and croped to three kinds of size:128, 256 and 512. I used python to do data augmentation because PIL library provide plenty of functions for image processing.</p>
<p>The first preprocess The method I chose for data augmentation is listed as follows:</p>
<ul>
<li>Brightness adjustment</li>
<li>Contrast adjustment</li>
<li>Sharp adjustment</li>
<li>Flipping images horizontally, vertically and both<br></li>
<li>Rotating images by random degrees, range from 0 to 360</li>
</ul>
<p>Resizing was done after the cropping and the other transformations.</p>
<p>After augmentation, the training set becomes 10 times bigger. Remember that the training set is fairly unbalanced, and if we use the whole dataset to train one network, the network tends to maintain the features of the class with the most samples. To overcome this problem, team O_o adjusted the weight of different classes during training, but dynamic training batch seems impossible for caffe implemention, Jeffery used oversample to get a more uniform distribution of classes in batches.</p>
<p>I have googled how to handle the problem of unbalanced dataset, the most cogent one to me is that:</p>
<p>Divide the more abundant class into L distinct clusters. Then train L predictors, where each predictor is trained on only one of the distinct clusters, but on all of the data from the rare class. To be clear, the data from the rare class is used in the training of all L predictors. Finally, use model averaging for the L learned predictors as your final predictor.</p>
<p>So I divide class 0 into 10 subsets, and going to train 10 different networks, the final prediction will be based on the average of these models, I chose this approach because the whole training dataset is used and each network is independent to others, and these networks can be considered as an ensemble system for prediction.</p>
<h3 id="stage-3-training">Stage 3: Training</h3>
<p>When we have prepared the training dataset, we can design the architecture of the CNN, then. I studied the networks of Jeffery and team O_o, they are alomost the same but slightly different in some details, so I imitate the network architecture and designed two kinds of network, a simple one and a relatively complicated one. The training method is like VGG network, train the simple network first and used its parameters to initialize the bigger one.</p>
<p>My first model used 128x128 rescaled input and I stayed with that for a decent amount of time in the beginning (first 3-4 weeks). A week or so later my first real model had an architecture that looked like this (listing the output size of each layer)</p>
<table>
<thead>
<tr class="header">
<th align="center">Nr</th>
<th align="center">Name</th>
<th align="center">batch</th>
<th align="center">channels</th>
<th align="center">width</th>
<th align="center">height</th>
<th align="center">filter/stride</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">Input</td>
<td align="center">32</td>
<td align="center">3</td>
<td align="center">120</td>
<td align="center">120</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">Conv</td>
<td align="center">128</td>
<td align="center">32</td>
<td align="center">120</td>
<td align="center">120</td>
<td align="center">3//1</td>
</tr>
<tr class="odd">
<td align="center">2</td>
<td align="center">Conv</td>
<td align="center">128</td>
<td align="center">16</td>
<td align="center">120</td>
<td align="center">120</td>
<td align="center">3//1</td>
</tr>
<tr class="even">
<td align="center">3</td>
<td align="center">Max Pool</td>
<td align="center">128</td>
<td align="center">16</td>
<td align="center">120</td>
<td align="center">120</td>
<td align="center">3//2</td>
</tr>
<tr class="odd">
<td align="center">4</td>
<td align="center">Conv</td>
<td align="center">128</td>
<td align="center">64</td>
<td align="center">59</td>
<td align="center">59</td>
<td align="center">3//1</td>
</tr>
<tr class="even">
<td align="center">5</td>
<td align="center">Conv</td>
<td align="center">128</td>
<td align="center">32</td>
<td align="center">59</td>
<td align="center">59</td>
<td align="center">3//1</td>
</tr>
<tr class="odd">
<td align="center">5</td>
<td align="center">Conv</td>
<td align="center">128</td>
<td align="center">32</td>
<td align="center">59</td>
<td align="center">59</td>
<td align="center">3//1</td>
</tr>
</tbody>
</table>
</span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Machine-Learning/" rel="tag">#Machine Learning</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/01/05/ILSVRC2015相关论文笔记/" rel="prev">ILSVRC2015相关论文笔记</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/12/10/Leetcode总结/" rel="next">Leetcode总结</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
              <div class="ds-thread" data-thread-key="2015/12/17/Kaggle-Competition/"
                   data-title="Kaggle Competition" data-url="http://yoursite.com/2015/12/17/Kaggle-Competition/">
              </div>
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/default_avatar.jpg" alt="John Yao" itemprop="image"/>
          <p class="site-author-name" itemprop="name">John Yao</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Dubers Blog</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">15</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">分類</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">標籤</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#kaggle-diabetic-retinopathy-detection"><span class="nav-number">1.</span> <span class="nav-text">Kaggle Diabetic Retinopathy Detection</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#introduction"><span class="nav-number">1.1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stage-1-explortary-data-analysis"><span class="nav-number">1.2.</span> <span class="nav-text">Stage 1: Explortary Data Analysis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#stage-3-training"><span class="nav-number">1.3.</span> <span class="nav-text">Stage 3: Training</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Yao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"dubur"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
